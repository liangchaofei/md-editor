# Chapter 32 - 首页和路由系统实现完成

## 实现内容

### 1. 首页 (HomePage.tsx)
全新的 AI 对话式写作界面，参考你提供的 UX 设计：

**主要功能：**
- **欢迎标题**："Hi，我是智能写作助手"
- **大型输入框**：用户可以直接输入写作需求
- **模式选择按钮**（底部左侧）：
  - 通用智能体（全文生成）
  - 分步生成（大纲模式）
  - 知识库（占位）
- **工具按钮**（底部右侧）：
  - 附件上传
  - 语音输入
  - 发送按钮（渐变紫蓝色）
- **我的文档**：可折叠的最近文档列表
- **自动跳转**：输入内容后点击发送，自动创建文档并跳转到编辑器

**设计特点：**
- 简洁的对话式界面
- 渐变背景（紫色到蓝色）
- 大输入框，支持多行输入
- 模式按钮带图标和高亮状态
- 响应式设计

### 2. 路由系统
```
/ (首页)
  - AI 对话式写作界面
  - 选择生成模式
  - 输入写作需求

/editor (编辑器)
  - 自动选择第一个文档

/editor/:documentId (编辑器)
  - 打开指定文档
  - 接收首页传递的初始提示词和生成模式
```

### 3. 编辑器页面 (EditorPage.tsx)
- 保留原有的三栏布局（侧边栏 + 编辑器 + AI 面板）
- 接收首页传递的参数：
  - `initialPrompt`：用户在首页输入的内容
  - `initialGenerationMode`：选择的生成模式
- 自动触发 AI 生成

### 4. Header 组件优化
- Logo 可点击返回首页
- 添加"新建文档"按钮
- 保留侧边栏切换功能

### 5. 数据流
```
首页输入 → 创建文档 → 跳转编辑器 → 自动触发 AI
  ↓           ↓            ↓              ↓
用户输入    新文档ID    传递参数      开始生成
```

## 技术实现

### 新增依赖
- `react-router-dom`：路由管理

### 新增文件
- `client/src/pages/HomePage.tsx`：首页组件
- `client/src/pages/EditorPage.tsx`：编辑器页面组件

### 修改文件
- `client/src/App.tsx`：添加路由配置
- `client/src/components/layout/Header.tsx`：添加导航功能
- `client/src/components/editor/EditorContainer.tsx`：接收初始参数
- `client/src/components/editor/TiptapEditor.tsx`：传递初始参数
- `client/src/components/editor/AIChatPanel.tsx`：自动触发初始提示词

## 用户体验流程

### 场景 1：从首页开始创作
1. 用户访问首页 `/`
2. 看到欢迎界面和大输入框
3. 选择生成模式（通用智能体 或 分步生成）
4. 输入写作需求，例如："写一个 AI 应用开发平台的标书"
5. 点击发送按钮
6. 自动创建新文档并跳转到编辑器
7. AI 自动开始生成内容（根据选择的模式）

### 场景 2：从首页打开已有文档
1. 用户访问首页 `/`
2. 点击"我的文档"按钮
3. 看到最近文档列表
4. 点击某个文档卡片
5. 跳转到编辑器页面

### 场景 3：在编辑器中返回首页
1. 用户在编辑器页面
2. 点击 Header 中的 Logo
3. 返回首页

### 场景 4：在编辑器中新建文档
1. 用户在编辑器页面
2. 点击 Header 中的"新建文档"按钮
3. 创建新文档并刷新编辑器

## 设计亮点

1. **对话式交互**：首页采用对话式设计，降低使用门槛
2. **模式可见**：生成模式在首页就可以选择，用户清楚知道会发生什么
3. **无缝衔接**：从首页到编辑器的过渡流畅，参数自动传递
4. **自动触发**：到达编辑器后自动开始生成，无需重复输入
5. **视觉统一**：首页和编辑器使用相同的设计语言（紫蓝渐变）

## 下一步优化建议

1. **首页智能体列表**：参考截图底部的智能体卡片
2. **知识库功能**：实现知识库按钮的实际功能
3. **附件上传**：实现附件上传功能
4. **语音输入**：实现语音输入功能
5. **历史对话**：在首页显示历史对话记录
6. **快捷操作**：添加常用模板和快捷指令

## 测试建议

1. 测试首页输入 → 编辑器生成的完整流程
2. 测试不同生成模式的切换
3. 测试文档列表的显示和跳转
4. 测试 Logo 返回首页功能
5. 测试新建文档功能
6. 测试路由的前进后退

## 总结

成功实现了方案三的首页和路由系统，用户现在可以：
- 在首页直接开始 AI 对话写作
- 选择生成模式（全文 或 分段）
- 自动跳转到编辑器并开始生成
- 在首页和编辑器之间自由切换

整个流程简洁流畅，符合现代 AI 写作工具的交互模式。
