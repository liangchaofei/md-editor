# Chapter 27 快速开始

## 5 分钟体验 AI 对话式文档编辑

### 1. 启动服务（2 分钟）

```bash
# 终端 1：启动后端
cd server
pnpm dev

# 终端 2：启动前端  
cd client
pnpm dev
```

等待服务启动完成，浏览器会自动打开 `http://localhost:5173`

---

### 2. 创建测试文档（1 分钟）

1. 点击左侧"新建文档"按钮
2. 输入文档标题："AI 编辑测试"
3. 在编辑器中输入以下内容：

```markdown
# 项目介绍

这是一个企业级协同编辑器项目。

## 技术栈介绍

本项目使用以下技术栈：
- 前端：React 18 + TypeScript + Vite
- 后端：Node.js + Koa2
- 数据库：SQLite

## 功能特性

1. 实时协同编辑
2. AI 写作助手
3. 版本历史管理
```

---

### 3. 测试 AI 编辑（2 分钟）

#### 测试 1：修改标题

1. 确保右侧 AI 助手面板已打开（如果没有，点击顶部"AI 助手"按钮）
2. 在 AI 对话框输入：
   ```
   把技术栈介绍改为技术架构说明
   ```
3. 点击"发送"或按 Enter
4. 观察：
   - 右侧显示 AI 思考过程
   - 编辑器中"技术栈介绍"显示删除线
   - "技术架构说明"显示绿色高亮
5. Hover 到绿色文本
6. 点击"接受"按钮
7. 验证：只保留新文本"技术架构说明"

✅ **成功！** 你已经完成了第一次 AI 对话式编辑

#### 测试 2：修改正文

1. 在 AI 对话框输入：
   ```
   把 React 18 改为 React 19
   ```
2. 观察 diff 效果：~~React 18~~ React 19
3. 点击"接受"

✅ **成功！** 你已经掌握了基本用法

---

## 核心功能说明

### Diff 展示

```
原文（删除线） + 空格 + 新文本（绿色高亮）
```

- **删除线**：表示要删除的原文
- **绿色高亮**：表示要添加的新文本
- **Hover**：显示操作按钮

### 操作按钮

- **接受**：应用修改，只保留新文本
- **拒绝**：取消修改，只保留原文

### AI 理解能力

AI 可以理解：
- "把 A 改为 B"
- "将 A 改成 B"
- "修改 A 为 B"
- "替换 A 为 B"
- "把第一个 A 改为 B"（指定位置）

---

## 常见问题

### Q: AI 无法定位到文本？

**A**: 检查：
1. 文本是否存在于文档中
2. 文本是否完全一致（包括空格、标点）
3. 尝试提供更多上下文（如"把第二段的 XXX 改为 YYY"）

### Q: Tooltip 不显示？

**A**: 
1. 确保 Hover 到绿色高亮文本
2. 等待 100-200ms（有延迟）
3. 检查浏览器控制台是否有错误

### Q: 接受后内容不对？

**A**:
1. 刷新页面重试
2. 查看浏览器控制台日志
3. 检查是否有其他建议未处理

---

## 调试技巧

### 查看控制台日志

按 F12 打开开发者工具，查看 Console：

```
🔍 文本定位调试
📄 文档长度: 500
🎯 目标文本: "技术栈介绍"
✅ 策略1: 精确匹配成功
   位置: { from: 45, to: 50 }
```

### 检查 DOM 元素

在 Elements 标签中查找：
```html
<span data-suggestion-id="suggestion-xxx" class="suggestion-mark">
  新文本
</span>
```

---

## 下一步

1. **尝试更复杂的修改**
   - 修改多个词
   - 修改整个段落
   - 指定位置修改

2. **测试边界情况**
   - 多处相同文本
   - 特殊字符
   - 长文本

3. **查看教程文档**
   - `docs/chapter-27.md` - 完整教程
   - `CHAPTER_27_TEST_GUIDE.md` - 测试指南
   - `CHAPTER_27_SUMMARY.md` - 实现总结

---

## 反馈

如果遇到问题：
1. 查看控制台日志
2. 检查网络请求
3. 查看 DOM 元素
4. 参考测试指南

祝你使用愉快！🎉
